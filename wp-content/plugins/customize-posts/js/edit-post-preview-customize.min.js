var EditPostPreviewCustomize=function(e,t){"use strict";var i={data:{previewed_post:null}};return"undefined"!=typeof _editPostPreviewCustomizeExports&&e.extend(i.data,_editPostPreviewCustomizeExports),i.init=function(){t.bind("ready",function(){i.ready()})},i.populateSettings=function(){var e,n;i.settingsPopulated||(i.settingsPopulated=!0,t.previewer.unbind("customized-posts",i.populateSettings),e="previewedCustomizePostSettings["+String(i.data.previewed_post.ID)+"]",(n=sessionStorage.getItem(e))?(sessionStorage.removeItem(e),n=JSON.parse(n),_.each(n,function(e,i){t(i,function(t){_.isObject(e)?t.set(_.extend({},t.get()||{},e)):t.set(e)})})):"undefined"!=typeof console&&console.warn&&console.warn("Missing previewedCustomizePostSettings"))},i.ready=function(){t.state.has("changesetStatus")||t.previewer.bind("customized-posts",i.populateSettings),t.state("saved").set(!0).validate=function(){return!0},t.panel.each(i.deactivatePanel),t.panel.bind("add",i.deactivatePanel),t.section.each(i.deactivateSection),t.section.bind("add",i.deactivateSection),i.parentFrame=new t.Messenger({url:t.settings.url.parent,channel:"loader"}),i.parentFrame.bind("populate-setting",function(e){t.has(e.id)&&t(e.id).set(e.value)}),t("post["+i.data.previewed_post.post_type+"]["+i.data.previewed_post.ID+"]",function(e){e.bind(function(t){var n={};n[e.id]=t,i.sendSettingsToEditPostScreen(n)})}),i.parentFrame.send("customize-post-preview-ready")},i.sendSettingsToEditPostScreen=function(e){i.parentFrame.send("customize-post-settings-data",e)},i.deactivatePanel=function(e){var t="posts["+i.data.previewed_post.post_type+"]"===e.id;e.active.set(t),e.active.validate=function(){return t}},i.deactivateSection=function(e){var t="post["+i.data.previewed_post.post_type+"]["+String(i.data.previewed_post.ID)+"]"===e.id;e.active.set(t),e.active.validate=function(){return t}},i}(jQuery,wp.customize);