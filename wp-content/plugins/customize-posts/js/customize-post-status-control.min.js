!function(t){"use strict";t.controlConstructor.post_status=t.controlConstructor.dynamic.extend({initialize:function(s,e){var o,n=this;(o={}).params=_.extend({type:"post_status",label:t.Posts.data.l10n.fieldStatusLabel,active:!0,setting_property:"post_status",field_type:"select",choices:t.Posts.data.postStatusChoices,updateChoicesInterval:1e3},e.params||{}),t.controlConstructor.dynamic.prototype.initialize.call(n,s,o),n.deferred.embedded.done(function(){var s;n.selectElement=n.container.find("select"),n.optionFutureElement=n.selectElement.find("option[value=future]"),n.optionPublishElement=n.selectElement.find("option[value=publish]"),n.trashLink=n.container.find(".trash"),n.untrashLink=n.container.find(".untrash"),t.control(n.id,function(){n.keepUpdatingChoices()}),n.setting.bind(function(t,s){t.post_status===s.post_status&&t.post_date===s.post_date||n.updateChoices()}),_.delay(function(){n.toggleTrash()},50),n.originalPostStatus=n.setting().post_status,n.setting.bind(function(t,s){(t.post_status!==s.post_status&&"trash"===t.post_status||"trash"===s.post_status)&&n.toggleTrash()}),s=function(){var s=t.section(n.section());s&&s.collapse()},n.trashLink.on("click",function(t){var e=_.clone(n.setting.get());t.preventDefault(),e.post_status="trash",n.setting.set(e),_.delay(s,500)}),n.untrashLink.on("click",function(t){var s=_.clone(n.setting.get());t.preventDefault(),s.post_status=n.originalPostStatus,n.setting.set(s)})})},updateChoices:function(){var s,e,o,n=this,i=n.setting.get();(s=(e=t.Posts.parsePostDate(i.post_date))>(o=t.Posts.parsePostDate(t.Posts.getCurrentTime())))&&"publish"===i.post_status&&e-o<15e3&&(s=!1),n.optionFutureElement.prop("disabled")===s&&n.optionFutureElement.prop("disabled",!s),n.optionPublishElement.prop("disabled")!==s&&n.optionPublishElement.prop("disabled",s),(s&&"publish"===i.post_status||!s&&"future"===i.post_status)&&((i=_.clone(i)).post_status=s?"future":"publish",n.setting.set(i))},keepUpdatingChoices:function(){var s=this;t.control.has(s.id)?(s.updateChoices(),s.updateChoicesIntervalId=setTimeout(function(){s.keepUpdatingChoices()},s.params.updateChoicesInterval)):s.updateChoicesIntervalId=null},toggleTrash:function(){var s,e,o,n,i=this;n="trash"===i.setting.get().post_status,i.trashLink&&i.trashLink.toggle(!n),i.originalPostStatus&&i.untrashLink.toggle(Boolean(n&&i.originalPostStatus)),(s=t.section(i.section.get()))&&(o=(e=s.container.closest(".accordion-section")).find(".accordion-section-title:first"),e.toggleClass("is-trashed",n),!0===n?0===o.find(".customize-posts-trashed").length&&o.append(wp.template("customize-posts-trashed")()):e.find(".customize-posts-trashed").remove())}})}(wp.customize);