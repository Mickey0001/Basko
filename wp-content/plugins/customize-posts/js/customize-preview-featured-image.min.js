var CustomizePreviewFeaturedImage=function(e,t){"use strict";var a={data:{partialArgs:{selector:"",containerInclusive:!0,fallbackDependentSelector:""}}};return a.init=function(t){void 0!==t&&_.extend(a.data,t),a.registerPartials(),e.previewPosts.wpApiModelInstances.bind("add",a.handleWpApiBackboneModelAdd)},a.handleWpApiBackboneModelAdd=function(t){var a;_.isUndefined(t.get("featured_media"))||(a="postmeta["+t.get("type")+"]["+String(t.get("id"))+"][_thumbnail_id]",e(a,function(e){e.bind(function(e){t.set("featured_media",e)})}))},a.FeaturedImagePartial=e.selectiveRefresh.partialConstructor.deferred.extend({idPattern:/^postmeta\[(.+?)]\[(\d+)]\[_thumbnail_id]$/,initialize:function(t,r){var i,n,l,d,s=this;l=(i=t.match(s.idPattern))[1],n=parseInt(i[2],10),d=_.extend({post_id:n,post_type:l,selector:a.data.partialArgs.selector.replace(/%d/g,String(n)),settings:[t],primarySetting:t,containerInclusive:a.data.partialArgs.containerInclusive,fallbackDependentSelector:a.data.partialArgs.fallbackDependentSelector},r?r.params||{}:{}),e.selectiveRefresh.partialConstructor.deferred.prototype.initialize.call(s,t,{params:d})},refresh:function(){var a,r=this;return""===e(r.params.primarySetting)()?(a=t.Deferred(),r.fallback(),a.reject(),a):e.selectiveRefresh.Partial.prototype.refresh.apply(r,arguments)},renderContent:function(t){var a=this;return""===t.addedContent?(a.fallback(),!1):e.selectiveRefresh.Partial.prototype.renderContent.call(a,t)},fallback:function(){var a,r=this;a=r.params.fallbackDependentSelector.replace(/%d/g,String(r.params.post_id)),0!==t(a).length&&e.selectiveRefresh.partialConstructor.deferred.prototype.fallback.call(r)}}),a.ensurePartialForSetting=function(t){var r,i;return a.FeaturedImagePartial.prototype.idPattern.test(t.id)?(i=t.id,(r=e.selectiveRefresh.partial(i))?r:(r=new a.FeaturedImagePartial(i,{params:{settings:[t.id]}}),e.selectiveRefresh.partial.add(i,r),r)):null},a.registerPartials=function(){e.selectiveRefresh.partialConstructor.featured_image=a.FeaturedImagePartial,e.each(a.ensurePartialForSetting),e.bind("add",a.ensurePartialForSetting)},"undefined"!=typeof module&&(module.exports=a),a}(wp.customize,jQuery);